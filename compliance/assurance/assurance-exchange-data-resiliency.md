---
title: Résilience des données Exchange Online dans Microsoft 365
description: Dans cet article, vous trouverez une explication des différents aspects de la résilience des données au sein Exchange Online et Microsoft 365.
ms.author: robmazz
author: robmazz
manager: laurawi
ms.reviewer: sosstah
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
- MS-Compliance
f1.keywords:
- NOCSH
ms.custom: seo-marvel-apr2020
titleSuffix: Microsoft Service Assurance
hideEdit: true
ms.openlocfilehash: 8952d492c4427d5f4af64a853adaaf15303e8caf
ms.sourcegitcommit: fb379d1110a9a86c7f9bab8c484dc3f4b3dfd6f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/23/2021
ms.locfileid: "53088633"
---
# <a name="exchange-online-data-resiliency-in-microsoft-365"></a><span data-ttu-id="589ee-103">Exchange Online résilience des données dans Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="589ee-103">Exchange Online data resiliency in Microsoft 365</span></span>

>[!IMPORTANT]
><span data-ttu-id="589ee-104">À mesure que nous continuons d’investir de différentes façons pour conserver le contenu des boîtes aux lettres, nous andélisons le retrait des conservations In-Place dans le Centre d’administration Exchange (EAC) dans Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="589ee-104">As we continue to invest in different ways to preserve mailbox content, we're announcing the retirement of In-Place Holds in the Exchange admin center (EAC) in Exchange Online.</span></span> <span data-ttu-id="589ee-105">À compter du 1er juillet 2020, vous ne pourrez pas créer de nouvelles In-Place de la place.</span><span class="sxs-lookup"><span data-stu-id="589ee-105">Starting July 1, 2020, you won't be able to create new In-Place Holds.</span></span> <span data-ttu-id="589ee-106">Toutefois, vous pourrez toujours gérer les In-Place dans le EAC ou à l’aide de la cmdlet **Set-MailboxSearch** dans Exchange Online PowerShell.</span><span class="sxs-lookup"><span data-stu-id="589ee-106">But you'll still be able to manage In-Place Holds in the EAC or by using the **Set-MailboxSearch** cmdlet in Exchange Online PowerShell.</span></span> <span data-ttu-id="589ee-107">Toutefois, à compter du 1er octobre 2020, vous ne pourrez plus gérer les In-Place'</span><span class="sxs-lookup"><span data-stu-id="589ee-107">However, starting October 1, 2020, you won't be able to manage In-Place Holds.</span></span> <span data-ttu-id="589ee-108">Vous ne pourrez les supprimer que dans le EAC ou à l’aide de la cmdlet **Remove-MailboxSearch.**</span><span class="sxs-lookup"><span data-stu-id="589ee-108">You'll only be able to remove them in the EAC or by using the **Remove-MailboxSearch** cmdlet.</span></span> <span data-ttu-id="589ee-109">LIn-Place des Exchange Server et Exchange les déploiements hybrides seront toujours pris en charge.</span><span class="sxs-lookup"><span data-stu-id="589ee-109">Using In-Place Holds in Exchange Server and Exchange hybrid deployments will still be supported.</span></span> <span data-ttu-id="589ee-110">Pour plus d’informations sur le retrait des In-Place de Exchange Online, voir Retrait des outils [eDiscovery hérités.](/microsoft-365/compliance/legacy-ediscovery-retirement)</span><span class="sxs-lookup"><span data-stu-id="589ee-110">For more information about the retirement of In-Place Holds in Exchange Online, see [Retirement of legacy eDiscovery tools](/microsoft-365/compliance/legacy-ediscovery-retirement).</span></span>

<span data-ttu-id="589ee-111">Une conservation inaltérable conserve tout le contenu d’une boîte aux lettres, y compris les éléments supprimés et les versions originales des éléments modifiés.</span><span class="sxs-lookup"><span data-stu-id="589ee-111">An In-Place Hold preserves all mailbox content, including deleted items and original versions of modified items.</span></span> <span data-ttu-id="589ee-112">Tous ces éléments de boîte aux lettres sont renvoyés dans une recherche de [Découverte électronique locale](/exchange/security-and-compliance/in-place-ediscovery/in-place-ediscovery).</span><span class="sxs-lookup"><span data-stu-id="589ee-112">All such mailbox items are returned in an [In-Place eDiscovery](/exchange/security-and-compliance/in-place-ediscovery/in-place-ediscovery) search.</span></span> <span data-ttu-id="589ee-113">Lorsque vous placez une In-Place sur la boîte aux lettres d’un utilisateur, le contenu de la boîte aux lettres d’archivage correspondante (si elle est activée) est également mis en attente et renvoyé dans une recherche de découverte électronique.</span><span class="sxs-lookup"><span data-stu-id="589ee-113">When you place an In-Place Hold on a user's mailbox, the contents in the corresponding archive mailbox (if it's enabled) are also placed on hold and returned in an eDiscovery search.</span></span>

<span data-ttu-id="589ee-114">Il existe deux types d’altération qui peuvent affecter une base de données Exchange : l’altération physique, qui est généralement causée par des problèmes matériels (notamment le matériel de stockage) et l’altération logique, qui se produit en raison d’autres facteurs.</span><span class="sxs-lookup"><span data-stu-id="589ee-114">There are two types of corruption that can affect an Exchange database: physical corruption, which is typically caused by hardware (in particular, storage hardware) problems, and logical corruption, which occurs due to other factors.</span></span> <span data-ttu-id="589ee-115">En règle générale, il existe deux types d’altération logique qui peuvent se produire au sein d’Exchange base de données :</span><span class="sxs-lookup"><span data-stu-id="589ee-115">Generally, there are two types of logical corruption that can occur within an Exchange database:</span></span>

- <span data-ttu-id="589ee-116">**Corruption logique de la base de** données : la base de données de la page de contrôle correspond, mais les données de la page sont erronées logiquement.</span><span class="sxs-lookup"><span data-stu-id="589ee-116">**Database logical corruption** - The database page checksum matches, but the data on the page is wrong logically.</span></span> <span data-ttu-id="589ee-117">Cela peut se produire lorsque le moteur de base de données (le moteur ESE (Extensible Stockage Engine) tente d’écrire une page de base de données et même si le système d’exploitation renvoie un message de réussite, les données ne sont jamais écrites sur le disque ou au mauvais endroit.</span><span class="sxs-lookup"><span data-stu-id="589ee-117">This can occur when the database engine (the Extensible Storage Engine (ESE)) attempts to write a database page and even though the operating system returns a success message, the data is either never written to the disk or it's written to the wrong place.</span></span> <span data-ttu-id="589ee-118">Il s’agit d’un *vidage perdu*.</span><span class="sxs-lookup"><span data-stu-id="589ee-118">This is referred to as a *lost flush*.</span></span> <span data-ttu-id="589ee-119">ESE inclut de nombreuses fonctionnalités et protections conçues pour empêcher l’altération physique d’une base de données et d’autres scénarios de perte de données.</span><span class="sxs-lookup"><span data-stu-id="589ee-119">ESE includes numerous features and safeguards that are designed to prevent physical corruption of a database and other data loss scenarios.</span></span> <span data-ttu-id="589ee-120">Pour éviter que des purges perdues ne perdent des données, ESE inclut un mécanisme de détection de purge perdue dans la base de données, ainsi qu’une fonctionnalité (restauration d’une seule page) pour les corriger.</span><span class="sxs-lookup"><span data-stu-id="589ee-120">To prevent lost flushes from losing data, ESE includes a lost flush detection mechanism in the database along with a feature (single page restore) to correct it.</span></span>
- <span data-ttu-id="589ee-121">**Altération logique du magasin** : les données sont ajoutées, supprimées ou manipulées d’une manière que l’utilisateur ne s’attend pas.</span><span class="sxs-lookup"><span data-stu-id="589ee-121">**Store logical corruption** - Data is added, deleted, or manipulated in a way that the user doesn't expect.</span></span> <span data-ttu-id="589ee-122">Ces cas sont dus à des applications tierces.</span><span class="sxs-lookup"><span data-stu-id="589ee-122">These cases are caused by third-party applications.</span></span> <span data-ttu-id="589ee-123">Elle est généralement corrompue dans le sens où l’utilisateur considère qu’elle est corrompue.</span><span class="sxs-lookup"><span data-stu-id="589ee-123">It's usually corruption in the sense that the user views it as corruption.</span></span> <span data-ttu-id="589ee-124">La banque d'informations Exchange considère la transaction qui est à l'origine de l'altération logique comme une série d'opérations MAPI valides.</span><span class="sxs-lookup"><span data-stu-id="589ee-124">The Exchange store considers the transaction that produced the logical corruption to be a series of valid MAPI operations.</span></span> <span data-ttu-id="589ee-125">Les [fonctionnalités](/exchange/security-and-compliance/create-or-remove-in-place-holds) de la mise en attente sur place dans Exchange Online offrent une protection contre l’altération logique de la boutique (car elles empêchent la suppression définitive du contenu par un utilisateur ou une application).</span><span class="sxs-lookup"><span data-stu-id="589ee-125">The [In-Place Hold](/exchange/security-and-compliance/create-or-remove-in-place-holds) features in Exchange Online provides protection from store logical corruption (because it prevents content from being permanently deleted by a user or an application).</span></span> 

<span data-ttu-id="589ee-126">Exchange Online effectue plusieurs vérifications de cohérence sur les fichiers journaux répliqués lors de l’inspection et de la relecture des journaux.</span><span class="sxs-lookup"><span data-stu-id="589ee-126">Exchange Online performs several consistency checks on replicated log files during both log inspection and log replay.</span></span> <span data-ttu-id="589ee-127">Ces vérifications de cohérence empêchent la réplication de l’altération physique par le système.</span><span class="sxs-lookup"><span data-stu-id="589ee-127">These consistency checks prevent physical corruption from being replicated by the system.</span></span> <span data-ttu-id="589ee-128">Par exemple, lors de l’inspection du journal, il existe une vérification de l’intégrité physique qui vérifie le fichier journal et vérifie que la valeur de contrôle enregistrée dans le fichier journal correspond à la valeur de contrôle générée en mémoire.</span><span class="sxs-lookup"><span data-stu-id="589ee-128">For example, during log inspection, there is a physical integrity check that verifies the log file and validates that the checksum recorded in the log file matches the checksum generated in memory.</span></span> <span data-ttu-id="589ee-129">En outre, l’en-tête du fichier journal est examiné pour s’assurer que la signature du fichier journal enregistrée dans l’en-tête du journal correspond à celle du fichier journal.</span><span class="sxs-lookup"><span data-stu-id="589ee-129">In addition, the log file header is examined to make sure the log file signature recorded in the log header matches that of the log file.</span></span> <span data-ttu-id="589ee-130">Lors de la relecture du journal, le fichier journal fait l’objet d’un examen approfondi.</span><span class="sxs-lookup"><span data-stu-id="589ee-130">During log replay, the log file undergoes further scrutiny.</span></span> <span data-ttu-id="589ee-131">Par exemple, l’en-tête de base de données contient également la signature du journal comparée à la signature du fichier journal pour s’assurer qu’elles correspondent.</span><span class="sxs-lookup"><span data-stu-id="589ee-131">For example, the database header also contains the log signature that is compared with the log file's signature to ensure they match.</span></span> 

<span data-ttu-id="589ee-132">La protection contre l’altération des données de boîtes aux lettres dans Exchange Online est obtenue à l’aide de Exchange Native Data Protection, une stratégie de résilience qui tire parti de la réplication au niveau de l’application sur plusieurs serveurs et plusieurs centres de données, ainsi que d’autres fonctionnalités qui permettent de protéger les données contre la perte en raison d’une altération ou d’autres raisons.</span><span class="sxs-lookup"><span data-stu-id="589ee-132">Protection against corruption of mailbox data in Exchange Online is achieved by using Exchange Native Data Protection, a resiliency strategy that leverages application-level replication across multiple servers and multiple datacenters along with other features that help protect data from being lost due to corruption or other reasons.</span></span> <span data-ttu-id="589ee-133">Ces fonctionnalités incluent des fonctionnalités natives gérées par Microsoft ou l’application Exchange Online elle-même, telles que :</span><span class="sxs-lookup"><span data-stu-id="589ee-133">These features include native features that are managed by Microsoft or the Exchange Online application itself, such as:</span></span>

- [<span data-ttu-id="589ee-134">Groupes de disponibilité des données</span><span class="sxs-lookup"><span data-stu-id="589ee-134">Data Availability Groups</span></span>](/exchange/back-up-email)
- <span data-ttu-id="589ee-135">Correction à bit unique</span><span class="sxs-lookup"><span data-stu-id="589ee-135">Single Bit Correction</span></span> 
- <span data-ttu-id="589ee-136">Analyse de base de données en ligne</span><span class="sxs-lookup"><span data-stu-id="589ee-136">Online Database Scanning</span></span> 
- <span data-ttu-id="589ee-137">Détection de purge perdue</span><span class="sxs-lookup"><span data-stu-id="589ee-137">Lost Flush Detection</span></span> 
- <span data-ttu-id="589ee-138">Restauration d’une seule page</span><span class="sxs-lookup"><span data-stu-id="589ee-138">Single Page Restore</span></span> 
- <span data-ttu-id="589ee-139">Service de réplication de boîte aux lettres</span><span class="sxs-lookup"><span data-stu-id="589ee-139">Mailbox Replication Service</span></span> 
- <span data-ttu-id="589ee-140">Vérifications des fichiers journaux</span><span class="sxs-lookup"><span data-stu-id="589ee-140">Log File Checks</span></span> 
- <span data-ttu-id="589ee-141">Déploiement sur un système de fichiers résilient</span><span class="sxs-lookup"><span data-stu-id="589ee-141">Deployment on Resilient File System</span></span> 

<span data-ttu-id="589ee-142">Pour plus d’informations sur les fonctionnalités natives répertoriées précédemment, sélectionnez les liens hypertexte et consultez les informations suivantes pour plus d’informations et pour plus d’informations sur les éléments sans liens hypertexte.</span><span class="sxs-lookup"><span data-stu-id="589ee-142">For more information on the native features listed previously, select the hyperlinks, and see the following for additional information and for details on items without hyperlinks.</span></span> <span data-ttu-id="589ee-143">En plus de ces fonctionnalités natives, Exchange Online comprend également des fonctionnalités de résilience de données que les clients peuvent gérer, telles que :</span><span class="sxs-lookup"><span data-stu-id="589ee-143">In addition to these native features, Exchange Online also includes data resiliency features that customers can manage, such as:</span></span> 
- [<span data-ttu-id="589ee-144">Récupération d’élément unique (activée par défaut)</span><span class="sxs-lookup"><span data-stu-id="589ee-144">Single Item Recovery (enabled by default)</span></span>](/exchange/recipients-in-exchange-online/manage-user-mailboxes/recover-deleted-messages) 
- [<span data-ttu-id="589ee-145">Conservation inaltérable et conservation pour litige</span><span class="sxs-lookup"><span data-stu-id="589ee-145">In-Place Hold and Litigation Hold</span></span>](/exchange/security-and-compliance/in-place-and-litigation-holds) 
- [<span data-ttu-id="589ee-146">Rétention des éléments supprimés et Soft-Deleted boîtes aux lettres (activées par défaut)</span><span class="sxs-lookup"><span data-stu-id="589ee-146">Deleted Item Retention and Soft-Deleted Mailboxes (both enabled by default)</span></span>](/exchange/recipients-in-exchange-online/delete-or-restore-mailboxes) 

## <a name="database-availability-groups"></a><span data-ttu-id="589ee-147">Groupes de disponibilité de base de données</span><span class="sxs-lookup"><span data-stu-id="589ee-147">Database Availability Groups</span></span> 
<span data-ttu-id="589ee-148">Chaque base de données de boîtes aux lettres Microsoft 365 est hébergée dans un groupe de disponibilité de base de données [(DAG)](/exchange/back-up-email) et répliquée dans des centres de données géographiquement distincts au sein de la même région.</span><span class="sxs-lookup"><span data-stu-id="589ee-148">Every mailbox database in Microsoft 365 is hosted in a [database availability group (DAG)](/exchange/back-up-email) and replicated to geographically separate datacenters within the same region.</span></span> <span data-ttu-id="589ee-149">La configuration la plus courante est de quatre copies de base de données dans quatre centres de données . toutefois, certaines régions ont moins de centres de données (les bases de données sont répliquées vers trois centres de données en Inde et deux centres de données en Australie et au Japon).</span><span class="sxs-lookup"><span data-stu-id="589ee-149">The most common configuration is four database copies in four datacenters; however, some regions have fewer datacenters (databases are replicated to three datacenters in India, and two datacenters in Australia and Japan).</span></span> <span data-ttu-id="589ee-150">Toutefois, dans tous les cas, chaque base de données de boîtes aux lettres possède quatre copies distribuées dans plusieurs centres de données, garantissant ainsi que les données de boîte aux lettres sont protégées contre les défaillances logicielles, matérielles et même de centres de données.</span><span class="sxs-lookup"><span data-stu-id="589ee-150">But in all cases, every mailbox database has four copies that are distributed across multiple datacenters, thereby ensuring that mailbox data is protected from software, hardware, and even datacenter failures.</span></span> 

<span data-ttu-id="589ee-151">Sur ces quatre copies, trois d’entre elles sont configurées comme hautement disponibles.</span><span class="sxs-lookup"><span data-stu-id="589ee-151">Out of these four copies, three of them are configured as highly available.</span></span> <span data-ttu-id="589ee-152">La quatrième copie est configurée en tant que [copie de base de données retardée.](/Exchange/high-availability/manage-ha/activate-lagged-db-copies)</span><span class="sxs-lookup"><span data-stu-id="589ee-152">The fourth copy is configured as a [lagged database copy](/Exchange/high-availability/manage-ha/activate-lagged-db-copies).</span></span> <span data-ttu-id="589ee-153">La copie de base de données retardée n’est pas destinée à la récupération de boîte aux lettres individuelle ou à la récupération d’élément de boîte aux lettres.</span><span class="sxs-lookup"><span data-stu-id="589ee-153">The lagged database copy is not intended for individual mailbox recovery or mailbox item recovery.</span></span> <span data-ttu-id="589ee-154">Son objectif est de fournir un mécanisme de récupération pour les rares événements d’altération logique catastrophique à l’échelle du système.</span><span class="sxs-lookup"><span data-stu-id="589ee-154">Its purpose is to provide a recovery mechanism for the rare event of system-wide, catastrophic logical corruption.</span></span> 

<span data-ttu-id="589ee-155">Les copies de base de données retardées Exchange Online sont configurées avec un retard de relecture du fichier journal de sept jours.</span><span class="sxs-lookup"><span data-stu-id="589ee-155">Lagged database copies in Exchange Online are configured with a seven-day log file replay lag time.</span></span> <span data-ttu-id="589ee-156">En outre, le gestionnaire de retard de relecture Exchange est activé pour fournir la lecture dynamique des fichiers journaux pour les copies retardées afin de permettre aux copies de base de données retardées de se réparer et de gérer la croissance des fichiers journaux.</span><span class="sxs-lookup"><span data-stu-id="589ee-156">In addition, the Exchange Replay Lag Manager is enabled to provide dynamic log file play down for lagged copies to allow lagged database copies to self-repair and manage log file growth.</span></span> <span data-ttu-id="589ee-157">Bien que les copies de base de données retardées soient utilisées dans Exchange Online, il est important de comprendre qu’elles ne sont pas une sauvegarde à un point dans le temps garantie.</span><span class="sxs-lookup"><span data-stu-id="589ee-157">Although lagged database copies are used in Exchange Online, it is important to understand that they are not a guaranteed point-in-time backup.</span></span> <span data-ttu-id="589ee-158">Les copies de base de données retardées dans Exchange Online ont un seuil de disponibilité, généralement autour de 90 %, en raison de périodes où le disque contenant une copie retardée est perdu en raison d’une défaillance du disque, la copie retardée devient une copie hautement disponible (en raison de la lecture automatique), ainsi que les périodes où la copie de base de données retardée reconstruit la file d’attente de relecture du journal.</span><span class="sxs-lookup"><span data-stu-id="589ee-158">Lagged database copies in Exchange Online have an availability threshold, typically around 90%, due to periods where the disk containing a lagged copy is lost due to disk failure, the lagged copy becoming a highly available copy (due to automatic play down), as well as the periods where the lagged database copy is rebuilding the log replay queue.</span></span> 

## <a name="transport-resilience"></a><span data-ttu-id="589ee-159">Résilience de transport</span><span class="sxs-lookup"><span data-stu-id="589ee-159">Transport Resilience</span></span> 
<span data-ttu-id="589ee-160">Exchange Online comprend deux principales fonctionnalités de résilience de transport : la redondance des ombres et le dispositif de sécurité.</span><span class="sxs-lookup"><span data-stu-id="589ee-160">Exchange Online includes two primary transport resilience features: Shadow Redundancy and Safety Net.</span></span> <span data-ttu-id="589ee-161">La redondance des ombres conserve une copie redondante d’un message pendant son transit.</span><span class="sxs-lookup"><span data-stu-id="589ee-161">Shadow Redundancy keeps a redundant copy of a message while it is in transit.</span></span> <span data-ttu-id="589ee-162">Safety Net conserve une copie redondante d’un message une fois le message remis.</span><span class="sxs-lookup"><span data-stu-id="589ee-162">Safety Net keeps a redundant copy of a message after the message is successfully delivered.</span></span> 

<span data-ttu-id="589ee-163">Avec la redondance des Exchange Online, chaque serveur de transport effectue une copie de chaque message qu’il reçoit avant d’accusé de réception du message au serveur d’envoi.</span><span class="sxs-lookup"><span data-stu-id="589ee-163">With Shadow Redundancy, each Exchange Online transport server makes a copy of each message it receives before it acknowledges successfully receiving the message to the sending server.</span></span> <span data-ttu-id="589ee-164">Ainsi, tous les messages du pipeline de transport sont redondants en transit.</span><span class="sxs-lookup"><span data-stu-id="589ee-164">This makes all messages in the transport pipeline redundant while in transit.</span></span> <span data-ttu-id="589ee-165">Si Exchange Online le message d’origine a été perdu en transit, une copie redondante du message est redéiversée.</span><span class="sxs-lookup"><span data-stu-id="589ee-165">If Exchange Online determines the original message was lost in transit, a redundant copy of the message is redelivered.</span></span> 

<span data-ttu-id="589ee-166">Safety Net est une file d’attente de transport associée au service de transport sur un serveur de boîtes aux lettres.</span><span class="sxs-lookup"><span data-stu-id="589ee-166">Safety Net is a transport queue that is associated with the Transport service on a Mailbox server.</span></span> <span data-ttu-id="589ee-167">Cette file d'attente stocke des copies des messages qui ont été correctement traités par le serveur.</span><span class="sxs-lookup"><span data-stu-id="589ee-167">This queue stores copies of messages that were successfully processed by the server.</span></span> <span data-ttu-id="589ee-168">Lorsqu’une défaillance d’une base de données de boîtes aux lettres ou d’un serveur nécessite l’activation d’une copie de la base de données de boîtes aux lettres, les messages de la file d’attente Safety Net sont automatiquement renvoyés vers la nouvelle copie active de la base de données de boîtes aux lettres.</span><span class="sxs-lookup"><span data-stu-id="589ee-168">When a mailbox database or server failure requires activating an out-of-date copy of the mailbox database, messages in the Safety Net queue are automatically resubmitted to the new active copy of the mailbox database.</span></span> <span data-ttu-id="589ee-169">Safety Net est également redondant, ce qui élimine le transport comme point de défaillance unique.</span><span class="sxs-lookup"><span data-stu-id="589ee-169">Safety Net is also redundant, thereby eliminating transport as a single point of failure.</span></span> <span data-ttu-id="589ee-170">Il utilise le concept d’un dispositif de sécurité principal et d’un dispositif de sécurité de ombre dans lequel si le dispositif de sécurité principal n’est pas disponible pendant plus de 12 heures, les demandes de resoumettre deviennent des demandes de resoumettre de l’ombre et les messages sont redétransmités à partir du dispositif de sécurité de l’ombre.</span><span class="sxs-lookup"><span data-stu-id="589ee-170">It uses the concept of a Primary Safety Net and a Shadow Safety Net wherein if the Primary Safety Net is unavailable for more than 12 hours, resubmit requests become shadow resubmit requests, and messages are redelivered from the Shadow Safety Net.</span></span>

<span data-ttu-id="589ee-171">Les redémissions de messages à partir de Safety Net sont automatiquement lancées par le composant Active Manager du service de réplication Microsoft Exchange qui gère les DG et les copies de base de données de boîtes aux lettres.</span><span class="sxs-lookup"><span data-stu-id="589ee-171">Message resubmissions from Safety Net are automatically initiated by the Active Manager component of the Microsoft Exchange Replication service that manages DAGs and mailbox database copies.</span></span> <span data-ttu-id="589ee-172">Aucune action manuelle n’est requise pour resoumettre des messages à partir de Safety Net.</span><span class="sxs-lookup"><span data-stu-id="589ee-172">No manual actions are required to resubmit messages from Safety Net.</span></span> 

## <a name="single-bit-correction"></a><span data-ttu-id="589ee-173">Correction à bit unique</span><span class="sxs-lookup"><span data-stu-id="589ee-173">Single Bit Correction</span></span> 
<span data-ttu-id="589ee-174">ESE inclut un mécanisme permettant de détecter et de résoudre les erreurs CRC à bit unique (également appelées retournements à bit unique) qui sont le résultat d’erreurs matérielles (et en tant que telles, elles représentent une altération physique).</span><span class="sxs-lookup"><span data-stu-id="589ee-174">ESE includes a mechanism to detect and resolve single-bit CRC errors (also known as single-bit flips) that are the result of hardware errors (and as such they represent physical corruption).</span></span> <span data-ttu-id="589ee-175">Lorsque ces erreurs se produisent, ESE les corrige automatiquement et enregistre un événement dans le journal des événements.</span><span class="sxs-lookup"><span data-stu-id="589ee-175">When these errors occur, ESE automatically corrects them and logs an event in the event log.</span></span> 

## <a name="online-database-scanning"></a><span data-ttu-id="589ee-176">Analyse de base de données en ligne</span><span class="sxs-lookup"><span data-stu-id="589ee-176">Online Database Scanning</span></span> 
<span data-ttu-id="589ee-177">L’analyse de base de données en ligne (également appelée somme de vérification de base de *données)* est le processus dans lequel un ESE utilise un outil de vérification de cohérence de base de données pour lire chaque page et vérifier qu’elle est corrompue.</span><span class="sxs-lookup"><span data-stu-id="589ee-177">Online database scanning (also known as *database check summing*) is the process where an ESE uses a database consistency checker to read each page and check for page corruption.</span></span> <span data-ttu-id="589ee-178">L’objectif principal est de détecter les altérations physiques et les purges perdues qui ne sont peut-être pas détectées par les opérations transactionnelles.</span><span class="sxs-lookup"><span data-stu-id="589ee-178">The primary purpose is to detect physical corruption and lost flushes that may not be getting detected by transactional operations.</span></span> <span data-ttu-id="589ee-179">L’analyse de base de données effectue également des opérations d’incident post-store.</span><span class="sxs-lookup"><span data-stu-id="589ee-179">Database scanning also performs post-store crash operations.</span></span> <span data-ttu-id="589ee-180">L’espace peut être perdu en raison de pannes, et l’analyse de base de données en ligne recherche et récupère l’espace perdu.</span><span class="sxs-lookup"><span data-stu-id="589ee-180">Space can be leaked due to crashes, and online database scanning finds and recovers lost space.</span></span> <span data-ttu-id="589ee-181">Le système est conçu avec l’attente que chaque base de données soit entièrement analysée tous les sept jours.</span><span class="sxs-lookup"><span data-stu-id="589ee-181">The system is designed with the expectation that every database is fully scanned once every seven days.</span></span> 

## <a name="lost-flush-detection"></a><span data-ttu-id="589ee-182">Détection de purge perdue</span><span class="sxs-lookup"><span data-stu-id="589ee-182">Lost Flush Detection</span></span> 
<span data-ttu-id="589ee-183">Une purge perdue se produit lorsqu’une opération d’écriture de base de données renvoyée comme terminée par le sous-système de disque ou le système d’exploitation n’a pas réellement été écrite sur le disque ou qu’elle a été écrite au mauvais emplacement.</span><span class="sxs-lookup"><span data-stu-id="589ee-183">A lost flush occurs when a database write operation that the disk subsystem/operating system returned as completed did not actually get written to disk, or was written in the wrong location.</span></span> <span data-ttu-id="589ee-184">Les incidents de purge perdus peuvent entraîner une altération logique de la base de données. Par conséquent, pour éviter que des purges perdues entraînent la perte de données, ESE inclut un mécanisme de détection de purge perdu.</span><span class="sxs-lookup"><span data-stu-id="589ee-184">Lost flush incidents can result in database logical corruption, so to prevent lost flushes from resulting in lost data, ESE includes a lost flush detection mechanism.</span></span> <span data-ttu-id="589ee-185">Lorsque des pages de base de données sont écrites sur des copies passives, une vérification est effectuée pour les purges perdues sur la copie active.</span><span class="sxs-lookup"><span data-stu-id="589ee-185">As database pages are written to passive copies, a check is performed for lost flushes on the active copy.</span></span> <span data-ttu-id="589ee-186">Si un purgement perdu est détecté, ESE peut réparer le processus à l’aide d’un processus de correction de page.</span><span class="sxs-lookup"><span data-stu-id="589ee-186">If a lost flush is detected, ESE can repair the process using a page patching process.</span></span> 

## <a name="single-page-restore"></a><span data-ttu-id="589ee-187">Restauration d’une seule page</span><span class="sxs-lookup"><span data-stu-id="589ee-187">Single Page Restore</span></span> 
<span data-ttu-id="589ee-188">La restauration d’une seule page, également appelée correction de *page,* est un processus automatique dans lequel les pages de base de données endommagées sont remplacées par des copies saines à partir d’un réplica sain.</span><span class="sxs-lookup"><span data-stu-id="589ee-188">Single page restore, also known as *page patching*, is an automatic process where corrupt database pages are replaced by healthy copies from a healthy replica.</span></span> <span data-ttu-id="589ee-189">Le processus de réparation d’une page endommagée varie selon que la copie de base de données est active ou passive.</span><span class="sxs-lookup"><span data-stu-id="589ee-189">The repair process for a corrupt page depends on whether the database copy is active or passive.</span></span> <span data-ttu-id="589ee-190">Lorsqu’une copie de base de données active rencontre une page endommagée, elle peut copier une page à partir de l’un de ses réplicas, à condition que la page qu’elle copie soit à jour.</span><span class="sxs-lookup"><span data-stu-id="589ee-190">When an active database copy encounters a corrupted page, it can copy a page from one of its replicas, provided the page it copies is up to date.</span></span> <span data-ttu-id="589ee-191">Pour ce faire, vous pouvez placer une demande pour la page dans le flux de journal, qui est la base de la réplication de base de données de boîtes aux lettres.</span><span class="sxs-lookup"><span data-stu-id="589ee-191">This process is accomplished by putting a request for the page into the log stream, which is the basis of mailbox database replication.</span></span> <span data-ttu-id="589ee-192">Dès qu’un réplica rencontre la demande de page, il répond en envoyant une copie de la page à la copie de base de données à l’aide de la demande.</span><span class="sxs-lookup"><span data-stu-id="589ee-192">As soon as a replica encounters the page request, it responds by sending a copy of the page to the requesting database copy.</span></span> <span data-ttu-id="589ee-193">La restauration d’une seule page fournit également un mécanisme de communication asynchrone permettant aux utilisateurs actifs de demander une page à des réplicas, même si les réplicas sont actuellement hors connexion.</span><span class="sxs-lookup"><span data-stu-id="589ee-193">Single page restore also provides an asynchronous communication mechanism for the active to request a page from replicas, even if the replicas are currently offline.</span></span> 

<span data-ttu-id="589ee-194">En cas d’altération dans une copie passive de base de données, y compris une copie de base de données retardée, étant donné que ces copies sont toujours derrière leur copie active, il est toujours sûr de copier n’importe quelle page de la copie active vers une copie passive.</span><span class="sxs-lookup"><span data-stu-id="589ee-194">In case of corruption in a passive database copy, including a lagged database copy, because these copies are always behind their active copy, it is always safe to copy any page from the active copy to a passive copy.</span></span> <span data-ttu-id="589ee-195">Une copie de base de données passive est par nature hautement disponible. Ainsi, pendant le processus de mise à jour des pages, la relecture des journaux est suspendue, mais la copie des journaux continue.</span><span class="sxs-lookup"><span data-stu-id="589ee-195">A passive database copy is by nature highly available, so during the page patching process, log replaying is suspended, but log copying continues.</span></span> <span data-ttu-id="589ee-196">La copie passive de la base de données récupère une copie de la page endommagée à partir de la copie active, attend que le fichier journal qui répond à l’exigence maximale de génération du journal soit copié et inspecté, puis correctifs de la page endommagée.</span><span class="sxs-lookup"><span data-stu-id="589ee-196">The passive database copy retrieves a copy of the corrupted page from the active copy, waits until the log file that meets the maximum required log generation requirement is copied and inspected, and then patches the corrupt page.</span></span> <span data-ttu-id="589ee-197">Une fois que la page a été corrigé, la relecture du journal reprend.</span><span class="sxs-lookup"><span data-stu-id="589ee-197">Once the page has been patched, log replay resumes.</span></span> <span data-ttu-id="589ee-198">Le processus est le même pour la copie de base de données retardée, sauf que la base de données retardée relect d’abord tous les fichiers journaux nécessaires pour obtenir un état correctif.</span><span class="sxs-lookup"><span data-stu-id="589ee-198">The process is the same for the lagged database copy, except that the lagged database first replays all log files that are necessary to achieve a patchable state.</span></span> 

## <a name="mailbox-replication-service"></a><span data-ttu-id="589ee-199">Service de réplication de boîte aux lettres</span><span class="sxs-lookup"><span data-stu-id="589ee-199">Mailbox Replication Service</span></span> 
<span data-ttu-id="589ee-200">Le déplacement de boîtes aux lettres est un élément clé de la gestion d’un service de messagerie à grande échelle.</span><span class="sxs-lookup"><span data-stu-id="589ee-200">Moving mailboxes is a key part of managing a large-scale email service.</span></span> <span data-ttu-id="589ee-201">Il existe toujours des technologies mises à jour et des mises à niveau matérielles et de version à gérer. Par conséquent, il est essentiel de disposer d’un système robuste et limitée qui permet à nos ingénieurs d’effectuer ce travail tout en conservant la transparence des déplacements de boîtes aux lettres pour les utilisateurs (en s’assurer qu’ils restent en ligne tout au long du processus) et de s’assurer que le processus s’actualise normalement à mesure que les boîtes aux lettres s’agrandissent.</span><span class="sxs-lookup"><span data-stu-id="589ee-201">There are always updated technologies and hardware and version upgrades to deal with, so having a robust, throttled system that enables our engineers to accomplish this work while keeping the mailbox moves transparent to users (by making sure they stay online throughout the process) is key and making sure that the process scales up gracefully as mailboxes get larger and larger.</span></span> 

<span data-ttu-id="589ee-202">Le service Exchange réplication de boîte aux lettres (MRS) est responsable du déplacement des boîtes aux lettres entre les bases de données.</span><span class="sxs-lookup"><span data-stu-id="589ee-202">The Exchange Mailbox Replication Service (MRS) is responsible for moving mailboxes between databases.</span></span> <span data-ttu-id="589ee-203">Pendant le déplacement, mrs effectue une vérification de cohérence sur tous les éléments de la boîte aux lettres.</span><span class="sxs-lookup"><span data-stu-id="589ee-203">During the move, MRS performs a consistency check on all items within the mailbox.</span></span> <span data-ttu-id="589ee-204">Si un problème de cohérence est trouvé, mrs corrige le problème ou ignore les éléments endommagés, supprimant ainsi l’altération de la boîte aux lettres.</span><span class="sxs-lookup"><span data-stu-id="589ee-204">If a consistency issue is found, MRS will either correct the problem, or skip the corrupted items, thereby removing the corruption from the mailbox.</span></span> 

<span data-ttu-id="589ee-205">Étant donné que mrs est un composant de Exchange Online, nous pouvons apporter des modifications dans son code pour résoudre les nouvelles formes d’altération détectées à l’avenir.</span><span class="sxs-lookup"><span data-stu-id="589ee-205">Because MRS is a component of Exchange Online, we can make changes in its code to address new forms of corruption that are detected in the future.</span></span> <span data-ttu-id="589ee-206">Par exemple, si nous détectons un problème de cohérence que mrs n’est pas en mesure de résoudre, nous pouvons analyser l’altération, modifier le code MRS et corriger l’incohérence (si nous comprenons comment).</span><span class="sxs-lookup"><span data-stu-id="589ee-206">For example, if we detect a consistency issue that MRS is not able to fix, we can analyze the corruption, change the MRS code and correct the inconsistency (if we understand how to).</span></span> 

## <a name="log-file-checks"></a><span data-ttu-id="589ee-207">Vérifications des fichiers journaux</span><span class="sxs-lookup"><span data-stu-id="589ee-207">Log File Checks</span></span> 
<span data-ttu-id="589ee-208">Tous les fichiers journaux de transactions générés par une base Exchange de données font l’objet de plusieurs formes de vérification de cohérence.</span><span class="sxs-lookup"><span data-stu-id="589ee-208">All transaction log files generated by an Exchange database undergo several forms of consistency checks.</span></span> <span data-ttu-id="589ee-209">Lorsqu’un fichier journal est créé, la première chose à faire est qu’un modèle de bits est écrit, puis qu’une série d’écritures de journaux est effectuée.</span><span class="sxs-lookup"><span data-stu-id="589ee-209">When a log file is created, the first thing done is a bit pattern is written and then a series of log writes is performed.</span></span> <span data-ttu-id="589ee-210">Cette structure permet à Exchange Online d’exécuter une série de vérifications ( purge perdue, CRC et autres vérifications) pour valider chaque fichier journal tel qu’il est écrit, et à nouveau lors de sa réplication.</span><span class="sxs-lookup"><span data-stu-id="589ee-210">This structure enables Exchange Online to execute a series of checks (lost flush, CRC, and other checks) to validate each log file as it is written, and again as it is replicated.</span></span> 

## <a name="deployment-on-resilient-file-system"></a><span data-ttu-id="589ee-211">Déploiement sur un système de fichiers résilient</span><span class="sxs-lookup"><span data-stu-id="589ee-211">Deployment on Resilient File System</span></span> 
<span data-ttu-id="589ee-212">Pour éviter toute altération au niveau du système de fichiers, Exchange Online est déployé sur des partitions de système de fichiers résilient (ReFS) afin de fournir des fonctionnalités de récupération améliorées.</span><span class="sxs-lookup"><span data-stu-id="589ee-212">To help prevent corruption from occurring at the file system level, Exchange Online is being deployed on Resilient File System (ReFS) partitions to provide improved recovery capabilities.</span></span> <span data-ttu-id="589ee-213">ReFS est un système de fichiers dans Windows Server 2012 et ultérieurs conçu pour être plus résilient contre l’altération des données, optimisant ainsi la disponibilité et l’intégrité des données.</span><span class="sxs-lookup"><span data-stu-id="589ee-213">ReFS is a file system in Windows Server 2012 and later that is designed to be more resilient against data corruption thereby maximizing data availability and integrity.</span></span> <span data-ttu-id="589ee-214">Plus précisément, ReFS apporte des améliorations dans la mise à jour des métadonnées, ce qui offre une meilleure protection des données et réduit les cas d’altération des données.</span><span class="sxs-lookup"><span data-stu-id="589ee-214">Specifically, ReFS brings improvements in the way that metadata is updated which offers better protection for data and reduces data corruption cases.</span></span> <span data-ttu-id="589ee-215">Il utilise également des checksums pour vérifier l’intégrité des données de fichier et des métadonnées afin de s’assurer que l’altération des données est facilement trouvée et réparée.</span><span class="sxs-lookup"><span data-stu-id="589ee-215">It also uses checksums to verify the integrity of file data and metadata ensuring that data corruption is easily found and repaired.</span></span> 

<span data-ttu-id="589ee-216">Exchange Online avantages de ReFS :</span><span class="sxs-lookup"><span data-stu-id="589ee-216">Exchange Online takes advantage of several ReFS benefits:</span></span> 
- <span data-ttu-id="589ee-217">Une résilience plus grande en matière d’intégrité des données signifie moins d’incidents de corruption de données.</span><span class="sxs-lookup"><span data-stu-id="589ee-217">More resiliency in data integrity means fewer data corruption incidents.</span></span> <span data-ttu-id="589ee-218">La réduction du nombre d’incidents de corruption implique moins de réassages de base de données inutiles.</span><span class="sxs-lookup"><span data-stu-id="589ee-218">Reducing the number of corruption incidents means fewer unnecessary database reseeds.</span></span> 
- <span data-ttu-id="589ee-219">Checksum s’exécutant sur des métadonnées permettant de détecter plus rapidement et plus déterministement les cas de corruption, ce qui nous permet de corriger l’altération des données client avant que des échecs gris ne se produisent sur les volumes de données.</span><span class="sxs-lookup"><span data-stu-id="589ee-219">Checksum running on metadata enabling detections of corruption cases sooner and more deterministically, allowing us to fix customer data corruption before grey failures occur on data volumes.</span></span>
- <span data-ttu-id="589ee-220">Conçu pour fonctionner avec des jeux de données volumineux (pétaoctets et plus grands) sans impact sur les performances</span><span class="sxs-lookup"><span data-stu-id="589ee-220">Designed to work well with large data sets—petabytes and larger—without performance impact</span></span>
- <span data-ttu-id="589ee-221">Prise en charge d’autres fonctionnalités utilisées Exchange Online, telles que le chiffrement BitLocker.</span><span class="sxs-lookup"><span data-stu-id="589ee-221">Support for other features used by Exchange Online, such as BitLocker encryption.</span></span> 

<span data-ttu-id="589ee-222">Exchange Online également d’autres fonctionnalités ReFS :</span><span class="sxs-lookup"><span data-stu-id="589ee-222">Exchange Online also benefits from other ReFS features:</span></span> 
- <span data-ttu-id="589ee-223">**Intégrité (intégrité Flux)** : ReFS stocke les données d’une manière qui les protège contre de nombreuses erreurs courantes qui peuvent normalement provoquer une perte de données.</span><span class="sxs-lookup"><span data-stu-id="589ee-223">**Integrity (Integrity Streams)** - ReFS stores data in a way that protects it from many of the common errors that can normally cause data loss.</span></span> <span data-ttu-id="589ee-224">Microsoft 365 La recherche utilise la Flux intégrité pour faciliter la détection de l’altération anticipée du disque et les contrôles de contenu de fichier.</span><span class="sxs-lookup"><span data-stu-id="589ee-224">Microsoft 365 Search uses Integrity Streams to help with early disk corruption detection and checksums of file content.</span></span> <span data-ttu-id="589ee-225">La fonctionnalité réduit également les incidents de corruption causés par « Écritures en écriture » (lorsqu’une opération d’écriture ne se termine pas en raison de pannes d’alimentation, etc.).</span><span class="sxs-lookup"><span data-stu-id="589ee-225">The feature also reduces corruption incidents caused by 'Torn Writes” (when a write operation does not complete due to power outages, etc.).</span></span> 
- <span data-ttu-id="589ee-226">**Disponibilité (récupération)** : ReFS hiérarchise la disponibilité des données.</span><span class="sxs-lookup"><span data-stu-id="589ee-226">**Availability (Salvage)** - ReFS prioritizes the availability of data.</span></span> <span data-ttu-id="589ee-227">Historiquement, les systèmes de fichiers étaient souvent susceptibles d’être corrompus par des données qui exigeaient que le système soit mis hors connexion pour réparation.</span><span class="sxs-lookup"><span data-stu-id="589ee-227">Historically, file systems were often susceptible to data corruption that would require the system to be taken offline for repair.</span></span> <span data-ttu-id="589ee-228">Bien que rarement, si une altération se produit, ReFS implémente la récupération, une fonctionnalité qui supprime les données endommagées de l’espace de noms sur un volume en direct et garantit que les données de qualité ne sont pas affectées par des données endommagées non réparables.</span><span class="sxs-lookup"><span data-stu-id="589ee-228">Although rare, if corruption does occur, ReFS implements salvage, a feature that removes the corrupt data from the namespace on a live volume and ensures that good data is not adversely affected by non-repairable corrupt data.</span></span> <span data-ttu-id="589ee-229">L’application de la fonctionnalité récupération et l’isolation de l’altération des données aux volumes de base de données Exchange Online signifie que nous pouvons conserver les bases de données non affectées sur un volume endommagé sain entre le moment de l’altération et de l’action de réparation.</span><span class="sxs-lookup"><span data-stu-id="589ee-229">Applying the Salvage feature and isolating data corruption to Exchange Online database volumes means that we can keep non-affected databases on a corrupted volume healthy between the time of corruption and repair action.</span></span> <span data-ttu-id="589ee-230">Cette structure augmente la disponibilité des bases de données qui seraient normalement affectées par ces problèmes d’altération du disque.</span><span class="sxs-lookup"><span data-stu-id="589ee-230">This structure increases the availability of databases that would normally be affected by such disk corruption issues.</span></span> 
